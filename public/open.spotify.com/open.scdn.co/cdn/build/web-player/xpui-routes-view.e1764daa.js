(("undefined"!=typeof self?self:global).webpackJsonp=("undefined"!=typeof self?self:global).webpackJsonp||[]).push([[34],{"5jG6":function(e,t,n){"use strict";n.r(t);n("x3Br"),n("aOEW");var a=n("kpsr"),r=n("/m4v"),s=n("mXGw"),o=n.n(s),i=n("8Jek"),l=n.n(i),c=n("wJTk"),u=n.n(c),d=n("Dfan"),p="d49f9112c35efefc148f9b0117ff5682-scss",b="ea808ed7ca7ccc2fc34f5ebc41e0cdef-scss",m=n("Uj61"),y=n("qOe9"),f=n("NTQj"),h=n("B9Xw"),v=n("hGjs"),g=n("CBg4"),E=n("2rxp"),w=n("CNRc");const O=e=>{const{viewData:t,onRequestRecentlyPlayed:n,isFullyLoaded:a,onRequestRecentlyPlayedViewMore:r,showAll:i,items:c,onRequestAlbum:O,onRequestPlaylist:k,onRequestArtist:R,onRequestShow:j}=e,A=Object(s.useCallback)((()=>{!document.hidden&&navigator.onLine&&n()}),[n]);Object(s.useEffect)((()=>(A(),window.addEventListener("visibilitychange",A),window.addEventListener("online",A),()=>{window.removeEventListener("visibilitychange",A),window.removeEventListener("online",A)})),[A]),Object(d.b)((()=>{!function({items:e,onRequestAlbum:t,onRequestPlaylist:n,onRequestArtist:a,onRequestShow:r}){e.filter(g.d).forEach((({uri:e})=>{const s=u.a.from(e);if(s)switch(s.type){case u.a.Type.ALBUM:t(e);break;case u.a.Type.PLAYLIST:case u.a.Type.PLAYLIST_V2:n(e);break;case u.a.Type.ARTIST:a(e);break;case u.a.Type.SHOW:r(s.getBase62Id())}}))}({items:c,onRequestAlbum:O,onRequestPlaylist:k,onRequestArtist:R,onRequestShow:j})}),[c,O,k,R,j]);const S=Object(s.useCallback)((()=>{a||r()}),[a,r]);if(!t)return null;const P=t.content.next?Object(f.a)(Object(f.d)(t.href)):void 0,C=c.filter(g.c),I=v.b.get("view.recently-played");return i?o.a.createElement("section",{className:l()("contentSpacing",p)},o.a.createElement(w.a,{as:"h1",variant:w.a.canon,className:b},I),o.a.createElement(E.a,{onReachBottom:S},o.a.createElement(m.a,{entities:C}))):o.a.createElement(h.a,{total:t.content.total,seeAllUri:P,pageId:"desktop-home",title:I,tagline:t.tag_line},C.map((e=>{const t=Object(y.a)(e.uri);return o.a.createElement(t,{key:e.uri,entity:e})})))};O.defaultProps={showAll:!0,items:[]};var k=n("USNj");const R={onRequestRecentlyPlayed:a.ub,onRequestRecentlyPlayedViewMore:a.xb,onRequestAlbum:a.a,onRequestPlaylist:a.fb,onRequestArtist:a.f,onRequestShow:a.yb};t.default=Object(r.b)((e=>{const t=e.entities.views["recently-played"];return{viewData:t,isFullyLoaded:!t||null===t.content.next,items:Object.values(e.playbackHistory.contexts.map((({uri:t})=>{const n=Object(k.e)(t,e);return n?Object(g.a)(n):Object(g.b)({uri:t})})).concat(t?t.content.items:[]).reduce(((e,t)=>(e[t.uri]=t,e)),{})).sort(((e,t)=>t.lastPlayedTime-e.lastPlayedTime))}}),R)(O)},Uj61:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("mXGw"),r=n.n(a),s=n("/0yG"),o=n("qOe9"),i=n("pAAZ");const l=({entities:e=[]})=>0===e.length?null:r.a.createElement(s.b,{value:"EntitiesGrid"},r.a.createElement(i.b,{render:()=>e.map(((e,t)=>{const n=Object(o.a)(e.uri);return r.a.createElement(s.b,{key:e.uri,value:"card",index:t},r.a.createElement(n,{entity:e}))}))}))},tSk7:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));n("/YXa"),n("U00V");var a=n("mXGw"),r=n("eI+U"),s=n("bG6t");function o(e,t=r.gray30){const[,n]=Object(s.b)();return Object(a.useEffect)((()=>(null!==e&&n({type:"SET_BACKGROUND_COLOR",color:e}),()=>{n({type:"CLEAR_BACKGROUND_COLOR"})})),[e,n]),e||t}const i=({color:e,fallbackColor:t})=>(o(e,t),null)},uTSb:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewContainer",(function(){return K})),n.d(t,"PROJECT_RAMSES_GENRE_ID",(function(){return F}));n("/YXa"),n("w13K"),n("y89P"),n("U00V");var a=n("OvAC"),r=n.n(a),s=n("mXGw"),o=n.n(s),i=n("8Jek"),l=n.n(i),c=n("2rxp"),u=n("odWe"),d=n("kpsr"),p=n("/m4v"),b=n("f+XK"),m=n("/0yG"),y="_068730ef9c099df297fad5dde198f472-scss",f="_3322232c257ef2df0a96ea2e460a5d25-scss",h="b1b53e70887a91051a9d7dc85160fc6b-scss",v="_618647e5a92fa778aaa608168dbbe8db-scss",g="cb058aaa130f94dc530397320e704de2-scss",E=n("IHlA"),w=n("U2jI"),O=n("oS2X"),k=n("oPiR"),R=n("XhW5");const j=()=>Object(w.b)(O.p)===O.a.ONHOME?o.a.createElement(R.a,null,o.a.createElement(k.a,{onSearch:!1})):null;var A=n("5jG6"),S=n("B9Xw"),P=n("qOe9"),C=n("IaME"),I=n("zKkN"),q=n("V33d"),L=n("AlYL"),D=n("hGjs");const G=["DZ","BH","EG","JO","KW","LB","MA","OM","PS","QA","SA","TN","AE"],M=["RU","KZ","BY","UA","MD"];var T=n("NTQj"),x=n("OaJ5"),B=n("tX91"),U=n("oCOB"),H=n("cnbf"),W=n("7A1p"),N=n("tSk7");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const V={setDocumentTitle:u.x,onRequestView:d.Qb,onWrappedEligibility:d.Wb,onRequestItemsStyle:E.browseItemsStyleRequest,onRequestViewMore:d.Sb,playInspiredByMix:q.r,playContext:q.n,pause:q.k,resume:q.E},J=e=>{const{title:t,images:n,backgroundColor:a,isWrappedGenre:r,isWrappedEligible:s,noPodcastsInMarket:i,locale:l}=e;return o.a.createElement(o.a.Fragment,null,r?((e,t,n,a)=>a?o.a.createElement(x.c,{size:x.e.DEFAULT,title:a,isEligible:e,locale:t,noPodcastsInMarket:n}):null)(s,l,i,t):((e,t=[],n)=>{if(!e)return null;const a=t.filter((e=>"background"===e.name));return o.a.createElement(x.b,{backgroundImages:a,backgroundColor:n,size:0===a.length?x.e.SMALL:x.e.DEFAULT},o.a.createElement(B.a,null,o.a.createElement(U.a,{text:e})),o.a.createElement(x.f,null,o.a.createElement(x.j,null,e)))})(t,n,a))};class K extends s.PureComponent{constructor(...e){super(...e),r()(this,"handleLoadMore",(()=>{const{viewData:e,viewId:t,onRequestViewMore:n,isFullyLoaded:a}=this.props;if(!e)return;const r=this.disallowInfiniteScroll(e);a||r||n(t)})),r()(this,"isHeader",(e=>"HEADER"===e.rendering)),r()(this,"shouldRenderHeader",(e=>{const{isGenre:t}=this.props;return t||Boolean(this.getHeaderTitle(e))})),r()(this,"shouldSetBackgroundColor",(e=>!(!e||!Array.isArray(e.content.items))&&this.shouldRenderHeader(e))),r()(this,"renderCard",((e,t)=>{const n=Object(P.a)(e.uri);return o.a.createElement(m.a,{key:e.uri||t,value:"card",index:t},o.a.createElement(n,{entity:e}))})),r()(this,"renderLink",(e=>{let t=e.uri;e.href.indexOf("https://api.spotify.com/v1/views/")>-1&&(t=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:"),"-page"!==t.substr(-5)&&(t+="-page"),"hub-browse-grid"===this.props.viewId&&(t=t.replace(":view:",":genre:")));const n=Object(P.a)(t);return o.a.createElement(n,{key:e.href,entity:X(X({},e),{},{uri:t})})})),r()(this,"renderEntity",((e,t)=>{switch(e.type){case"link":return this.renderLink(e);default:return this.renderCard(e,t)}}))}componentDidMount(){const{viewData:e,viewId:t,country:n,isWrappedGenre:a,isAnonymous:r}=this.props;!r&&a&&this.props.onWrappedEligibility(),!n||e&&"POP"===this.props.history.action||!t||this.requestContent(t,n),this.props.setDocumentTitle(null==e?void 0:e.name)}componentDidUpdate(e){const{viewData:t,viewId:n,country:a}=this.props,{viewId:r,viewData:s}=e,o=n!==r;a&&!t&&o&&n&&this.requestContent(n,a),!t||s&&!o||this.props.setDocumentTitle(null==t?void 0:t.name)}disallowInfiniteScroll(e){return[/desktop-home/,/ginger-genre-affinity/].some((t=>e&&e.href&&e.href.match(t)))}requestContent(e,t){const{onRequestView:n,onRequestItemsStyle:a}=this.props;n(e,t),a()}getHeaderSpace(e){const{content:{items:t=[]}={}}=e||{},n=t.filter(this.isHeader);return n.length>0?n[0]:null}getHeaderTitle(e){const{backgroundColor:t}=this.props,{name:n}=e||{},a=this.getHeaderSpace(e);return a?a.name:t&&n}render(){var e;const{viewData:t,viewId:n,playbackState:a,playInspiredByMix:r,playContext:i,pause:u,resume:d,isGenre:p,isAnonymous:b,isWrappedGenre:E,locale:w}=this.props,O={currentlyPlayingUri:(null==a?void 0:a.currentlyPlayingUri)||"",inpiredByMixSeed:(null==a?void 0:a.inpiredByMixSeed)||{},isPlaybackPlaying:(null==a?void 0:a.isPlaybackPlaying)||!1,playContext:i,playInspiredByMix:r,pause:u,resume:d},k=this.getHeaderSpace(t)||{name:this.getHeaderTitle(t),images:[]},R=o.a.createElement(J,{isWrappedGenre:E,locale:w,title:k.name,images:k.images,backgroundColor:this.props.backgroundColor,isWrappedEligible:this.props.isWrappedEligible,noPodcastsInMarket:this.props.noPodcastsInMarket}),P=null==t?void 0:t.content.items,q=this.shouldRenderHeader(t),G=this.shouldSetBackgroundColor(t),M="desktop-home"===n;return o.a.createElement(C.b.Provider,{value:O},M&&o.a.createElement(s.Suspense,{fallback:null},o.a.createElement(j,null)),t?o.a.createElement(c.a,{onReachBottom:this.handleLoadMore},o.a.createElement("section",{className:l()({[y]:k.name})},G&&o.a.createElement(N.a,{color:this.props.backgroundColor||null}),q&&R,o.a.createElement("div",{className:h},q&&R&&o.a.createElement(I.a,{backgroundColor:this.props.backgroundColor}),o.a.createElement("div",{className:l()(f,"contentSpacing",{[g]:p,[v]:E})},null!=P&&null!==(e=P[0])&&void 0!==e&&e.content?P.filter((e=>!this.isHeader(e)&&e.content.total>0)).map(((e,t)=>{const a=e.content&&Object(T.a)(Object(T.d)(e.href));return b&&"uniquely-yours-shelf"===e.id?null:o.a.createElement(m.a,{value:"headered-grid",index:t,key:e.id},"recently-played"===e.id?o.a.createElement(A.default,{showAll:!1}):o.a.createElement(S.a,{total:e.content.total,seeAllUri:a,pageId:n,title:e.name,tagline:e.tag_line||void 0},e.content.items.map(this.renderEntity)))})):o.a.createElement(m.a,{value:"headered-grid"},o.a.createElement(S.a,{showAll:!0,title:t.name||"",total:(null==P?void 0:P.length)||0},(null==P?void 0:P.map(this.renderEntity))||null)))))):o.a.createElement(L.b,{errorMessage:D.b.get("error.not_found.title.page")}))}}const F="2020-page";t.default=Object(p.b)(((e,t)=>{var n,a,r,s,o,i,l,c,u,d;const p=t.viewId||t.match.params.viewId,m=e.entities.views[p]||null,y=!m||null===m.content.next,f="-page"!==p.substr(-5)?"".concat(p,"-page"):p,h=(null===(n=e.browse.allItemsStyle)||void 0===n||null===(a=n[f])||void 0===a?void 0:a.color)||"",v=null==e||null===(r=e.session)||void 0===r?void 0:r.isAnonymous,g=null==e||null===(s=e.session)||void 0===s?void 0:s.locale,E=e=>e.viewId===p||"href"in e&&e.href===Object(T.a)(p),w=(null==e||null===(o=e.browse)||void 0===o||null===(i=o.browseAll)||void 0===i?void 0:i.items.some(E))||(null==e||null===(l=e.browse)||void 0===l||null===(c=l.topGenres)||void 0===c?void 0:c.items.some(E))||!!h,O=p===F,k=null==e||null===(u=e.wrapped)||void 0===u?void 0:u.isWrappedEligible,R=(e=>void 0!==e&&(G.includes(e)||M.includes(e)))(null===(d=e.session.productState)||void 0===d?void 0:d.country);return{playbackState:Object(W.b)(e),viewData:m,isFullyLoaded:y,viewId:p,backgroundColor:h,country:Object(b.a)(e),isGenre:w,isWrappedGenre:O,isAnonymous:v,isWrappedEligible:k,locale:g,noPodcastsInMarket:R}}),(e=>Object(H.b)(V,e)))(K)},zKkN:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("mXGw"),r=n.n(a),s="_59ed5f1313c7c4b211995d2b6463683f-scss";const o=({backgroundColor:e})=>r.a.createElement("div",{className:s,style:{backgroundColor:e}})}}]);
//# sourceMappingURL=xpui-routes-view.e1764daa.js.map